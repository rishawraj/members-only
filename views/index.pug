extends layout

block content
  h1= title
  p Welcome to #{title}
  a(href="/signup") signup
  br
  br
  a(href="/login") login
  br
  br

  a(href="/add-message") add message!
  br
  br
  a(href="/join-the-club") join the club

  br
  br
  a(href="/admin") admin


  p #{user}

  h3 list all the messages here!

  each msg in messages 
    p #{msg}


    - if (user && user.isAdmin === true)
      div.message
        h3 #{msg.title}
        p #{msg.text}
        p #{msg.timestamp}
        p #{msg.fullname}
        form(action="/delete-message", method="post") 
          input(type="hidden", name="message_id" value=`${msg._id}`)
          button(type="submit") delete

    - else if (user && user.membership === true)
      div.message
        h3 #{msg.title}
        p #{msg.text}
        p #{msg.timestamp}
        p #{msg.fullname}

    - else
      div.message 
        h3 #{msg.title}
        p #{msg.text}


  br
  p User: #{user}
  p User: #{title}

  a(href="/logout") logout

